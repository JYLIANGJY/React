{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'isomorphic-unfetch';\n\nvar FetchData = function FetchData(props) {\n  return __jsx(\"div\", null, __jsx(\"h3\", null, \"\\u83B7\\u53D6\\u670D\\u52A1\\u7AEF\\u6570\\u636E\"), __jsx(\"ul\", null, props.productList.map(function (item) {\n    return __jsx(\"li\", {\n      key: item.id\n    }, item.title);\n  })));\n}; // 当页面初次加载时，只会在服务端执行一次，在路由的切换时客户端才会被执行。\n\n\nFetchData.getInitialProps = function _callee() {\n  var res, data;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch(\" http://localhost:8081/api/getProductList\"));\n\n        case 2:\n          res = _context.sent;\n          data = res.json();\n          return _context.abrupt(\"return\", {\n            productList: data.message\n          });\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default FetchData; // npm install --save isomorphic-unfetch","map":{"version":3,"sources":["E:/D/博学谷/React课程/视频录制/案例/next-react/pages/fetch-data/index.js"],"names":["fetch","FetchData","props","productList","map","item","id","title","getInitialProps","res","data","json","message"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,oBAAlB;;AACA,IAAMC,SAAS,GAAC,SAAVA,SAAU,CAACC,KAAD;AAAA,SACZ,mBACI,+DADJ,EAEI,kBAEQA,KAAK,CAACC,WAAN,CAAkBC,GAAlB,CAAsB,UAAAC,IAAI;AAAA,WACtB;AAAI,MAAA,GAAG,EAAEA,IAAI,CAACC;AAAd,OACKD,IAAI,CAACE,KADV,CADsB;AAAA,GAA1B,CAFR,CAFJ,CADY;AAAA,CAAhB,C,CAcA;;;AACAN,SAAS,CAACO,eAAV,GAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACVR,KAAK,CAAC,2CAAD,CADK;;AAAA;AACpBS,UAAAA,GADoB;AAErBC,UAAAA,IAFqB,GAEfD,GAAG,CAACE,IAAJ,EAFe;AAAA,2CAGlB;AAACR,YAAAA,WAAW,EAACO,IAAI,CAACE;AAAlB,WAHkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA1B;;AAKA,eAAeX,SAAf,C,CACA","sourcesContent":["import fetch from 'isomorphic-unfetch'\r\nconst FetchData=(props)=>(\r\n    <div>\r\n        <h3>获取服务端数据</h3>\r\n        <ul>\r\n            {\r\n                props.productList.map(item=>(\r\n                    <li key={item.id}>\r\n                        {item.title}\r\n                    </li>\r\n                ))\r\n            }\r\n        </ul>\r\n    </div>\r\n)\r\n// 当页面初次加载时，只会在服务端执行一次，在路由的切换时客户端才会被执行。\r\nFetchData.getInitialProps=async function(){\r\n  let res=await fetch(\" http://localhost:8081/api/getProductList\")\r\n let data= res.json();\r\n return {productList:data.message}\r\n}\r\nexport default FetchData\r\n// npm install --save isomorphic-unfetch"]},"metadata":{},"sourceType":"module"}