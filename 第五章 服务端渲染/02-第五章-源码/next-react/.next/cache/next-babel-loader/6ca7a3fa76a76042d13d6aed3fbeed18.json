{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport fetch from 'isomorphic-unfetch'; // const FetchData=(props)=>(\n//     <div>\n//         <h3>获取服务端数据</h3>\n//         <ul>\n//             {\n//                 props.productList.map(item=>(\n//                     <li key={item.id}>\n//                         {item.title}\n//                     </li>\n//                 ))\n//             }\n//         </ul>\n//     </div>\n// )\n// // 当页面初次加载时，只会在服务端执行一次，在路由的切换时客户端才会被执行。\n// FetchData.getInitialProps=async function(){\n//   let res=await fetch(\" http://localhost:8081/api/getProductList\")\n//  let data=await res.json();\n//  return {productList:data.message}\n// }\n// export default FetchData\n\nexport default class extends React.Component {\n  static async getInitialProps() {\n    let res = await fetch(\" http://localhost:8081/api/getProductList\");\n    let data = await res.json();\n    return {\n      productList: data.message\n    };\n  }\n\n  render() {\n    return __jsx(\"div\", null, __jsx(\"ul\", null, props.productList.map(item => __jsx(\"li\", {\n      key: item.id\n    }, item.title))));\n  }\n\n} // npm install --save isomorphic-unfetch","map":{"version":3,"sources":["E:/D/博学谷/React课程/视频录制/案例/next-react/pages/fetch-data/index.js"],"names":["React","fetch","Component","getInitialProps","res","data","json","productList","message","render","props","map","item","id","title"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,oBAAlB,C,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,eAAe,cAAcD,KAAK,CAACE,SAApB,CAA6B;AACxC,eAAaC,eAAb,GAA8B;AAC1B,QAAIC,GAAG,GAAC,MAAMH,KAAK,CAAC,2CAAD,CAAnB;AACA,QAAII,IAAI,GAAC,MAAMD,GAAG,CAACE,IAAJ,EAAf;AACA,WAAO;AAACC,MAAAA,WAAW,EAACF,IAAI,CAACG;AAAlB,KAAP;AACH;;AACDC,EAAAA,MAAM,GAAE;AACJ,WACI,mBACK,kBAEDC,KAAK,CAACH,WAAN,CAAkBI,GAAlB,CAAsBC,IAAI,IACtB;AAAI,MAAA,GAAG,EAAEA,IAAI,CAACC;AAAd,OACKD,IAAI,CAACE,KADV,CADJ,CAFC,CADL,CADJ;AAaH;;AApBuC,C,CAsB5C","sourcesContent":["import React from 'react'\r\nimport fetch from 'isomorphic-unfetch'\r\n// const FetchData=(props)=>(\r\n//     <div>\r\n//         <h3>获取服务端数据</h3>\r\n//         <ul>\r\n//             {\r\n//                 props.productList.map(item=>(\r\n//                     <li key={item.id}>\r\n//                         {item.title}\r\n//                     </li>\r\n//                 ))\r\n//             }\r\n//         </ul>\r\n//     </div>\r\n// )\r\n// // 当页面初次加载时，只会在服务端执行一次，在路由的切换时客户端才会被执行。\r\n// FetchData.getInitialProps=async function(){\r\n//   let res=await fetch(\" http://localhost:8081/api/getProductList\")\r\n//  let data=await res.json();\r\n//  return {productList:data.message}\r\n// }\r\n\r\n// export default FetchData\r\n\r\nexport default class extends React.Component{\r\n    static async getInitialProps(){\r\n        let res=await fetch(\" http://localhost:8081/api/getProductList\")\r\n        let data=await res.json();\r\n        return {productList:data.message}\r\n    }\r\n    render(){\r\n        return(\r\n            <div>\r\n                 <ul>\r\n             {\r\n                props.productList.map(item=>(\r\n                    <li key={item.id}>\r\n                        {item.title}\r\n                    </li>\r\n                ))\r\n            }\r\n        </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n// npm install --save isomorphic-unfetch"]},"metadata":{},"sourceType":"module"}